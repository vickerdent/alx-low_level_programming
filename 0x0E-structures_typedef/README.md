Now using structs and typedef
